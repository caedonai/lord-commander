---
title: "analyze"
description: "Deep analysis of bundle composition, performance metrics, and optimization opportunities"
---

## Overview

The `analyze` command provides comprehensive insights into your application's bundle composition, performance characteristics, and optimization opportunities. It helps identify bottlenecks, unused code, and areas for improvement.

## Basic Usage

```bash
# Basic analysis
lord-commander analyze

# Verbose output with detailed breakdown
lord-commander analyze --verbose

# Generate HTML report
lord-commander analyze --report
```

## Command Options

### Analysis Types

| Option       | Description              | Default |
| ------------ | ------------------------ | ------- |
| `--bundle`   | Bundle size analysis     | `true`  |
| `--deps`     | Dependency analysis      | `true`  |
| `--perf`     | Performance metrics      | `false` |
| `--security` | Security vulnerabilities | `false` |
| `--quality`  | Code quality metrics     | `false` |

```bash
# Full analysis with all options
lord-commander analyze --bundle --deps --perf --security --quality

# Only bundle analysis
lord-commander analyze --bundle --no-deps

# Performance focus
lord-commander analyze --perf --lighthouse
```

### Output Options

| Option      | Description        | Output               |
| ----------- | ------------------ | -------------------- |
| `--verbose` | Detailed output    | Console with details |
| `--json`    | JSON format        | Structured data      |
| `--report`  | HTML report        | Interactive report   |
| `--ci`      | CI-friendly output | Machine-readable     |

```bash
# JSON output for processing
lord-commander analyze --json > analysis.json

# HTML report with charts
lord-commander analyze --report --output ./reports/

# CI mode with exit codes
lord-commander analyze --ci --threshold 500kb
```

### Filtering Options

| Option      | Description             | Example                    |
| ----------- | ----------------------- | -------------------------- |
| `--include` | Include patterns        | `--include "src/**/*.ts"`  |
| `--exclude` | Exclude patterns        | `--exclude "**/*.test.js"` |
| `--entry`   | Entry points            | `--entry src/main.ts`      |
| `--chunks`  | Analyze specific chunks | `--chunks vendor,main`     |

## Bundle Analysis

### Size Metrics

The bundle analysis provides multiple size metrics:

```bash
lord-commander analyze --bundle --verbose
```

**Output:**

```
ğŸ“Š Bundle Analysis Results

Total Bundle Size: 847.2 KB
â”œâ”€â”€ Raw size: 2.1 MB
â”œâ”€â”€ Minified: 847.2 KB (-59.7%)
â”œâ”€â”€ Gzipped: 234.1 KB (-72.4%)
â””â”€â”€ Brotli: 198.7 KB (-76.5%)

ğŸ“¦ Chunk Breakdown:
â”œâ”€â”€ main.js: 456.3 KB (53.9%)
â”œâ”€â”€ vendor.js: 312.8 KB (36.9%)
â”œâ”€â”€ runtime.js: 45.2 KB (5.3%)
â””â”€â”€ async chunks: 32.9 KB (3.9%)
```

### Dependency Analysis

```bash
lord-commander analyze --deps --top 10
```

**Output:**

```
ğŸ“‹ Dependency Analysis

ğŸ¯ Largest Dependencies:
  1. react-dom           130.4 KB (15.4%)
  2. lodash              89.2 KB (10.5%)
  3. moment              67.8 KB (8.0%)
  4. chart.js            45.3 KB (5.3%)
  5. axios               34.2 KB (4.0%)

ğŸ“ˆ Dependency Growth:
  â€¢ Total dependencies: 847
  â€¢ Direct dependencies: 23
  â€¢ Transitive dependencies: 824
  â€¢ Dependency depth: 12 levels

ğŸ” Duplicate Dependencies:
  â€¢ lodash (3 versions): 4.17.21, 4.17.15, 3.10.1
  â€¢ react (2 versions): 18.2.0, 17.0.2
```

### Tree Shaking Analysis

```bash
lord-commander analyze --tree-shaking --unused
```

**Output:**

```
ğŸŒ³ Tree Shaking Analysis

âœ… Tree Shakable: 67.3% (568.9 KB)
âŒ Not Tree Shakable: 32.7% (278.3 KB)

ğŸ“Š Library Analysis:
â”œâ”€â”€ lodash: 89.2 KB (0% tree shaken) âš ï¸
â”œâ”€â”€ moment: 67.8 KB (0% tree shaken) âš ï¸
â”œâ”€â”€ react-dom: 130.4 KB (15% tree shaken) âœ…
â””â”€â”€ chart.js: 45.3 KB (45% tree shaken) âœ…

ğŸ” Dead Code Detection:
â”œâ”€â”€ Unused exports: 23 functions (12.4 KB)
â”œâ”€â”€ Unused imports: 8 modules (34.2 KB)
â””â”€â”€ Unreachable code: 3 files (5.7 KB)
```

## Performance Analysis

### Core Web Vitals

```bash
lord-commander analyze --perf --cwv
```

**Output:**

```
ğŸš€ Performance Metrics (Core Web Vitals)

Largest Contentful Paint (LCP): 2.4s âœ…
First Input Delay (FID): 120ms âœ…
Cumulative Layout Shift (CLS): 0.08 âœ…
First Contentful Paint (FCP): 1.2s âœ…

ğŸ“Š Performance Budget:
â”œâ”€â”€ JavaScript: 456.3 KB / 500 KB (91.3%) âš ï¸
â”œâ”€â”€ CSS: 89.2 KB / 100 KB (89.2%) âœ…
â”œâ”€â”€ Images: 234.1 KB / 300 KB (78.0%) âœ…
â””â”€â”€ Fonts: 67.8 KB / 100 KB (67.8%) âœ…

ğŸ¯ Optimization Opportunities:
â€¢ Reduce JavaScript bundle by 43.7 KB
â€¢ Implement code splitting for route-based chunks
â€¢ Optimize image formats (WebP/AVIF)
```

### Lighthouse Integration

```bash
lord-commander analyze --lighthouse --mobile
```

**Output:**

```
ğŸ” Lighthouse Audit Results

Performance Score: 87/100 âœ…
Accessibility Score: 94/100 âœ…
Best Practices Score: 92/100 âœ…
SEO Score: 89/100 âœ…

âš ï¸  Issues Found:
â€¢ Eliminate render-blocking resources (-0.5s)
â€¢ Serve images in next-gen formats (-0.3s)
â€¢ Remove unused JavaScript (-0.2s)

ğŸ’¡ Recommendations:
â€¢ Preload key requests
â€¢ Use efficient cache policy
â€¢ Minify CSS and JavaScript
```

## Security Analysis

### Vulnerability Scanning

```bash
lord-commander analyze --security --audit
```

**Output:**

```
ğŸ›¡ï¸  Security Analysis

Vulnerability Scan Results:
â”œâ”€â”€ Critical: 0 âœ…
â”œâ”€â”€ High: 2 âš ï¸
â”œâ”€â”€ Moderate: 5 âš ï¸
â””â”€â”€ Low: 12 â„¹ï¸

ğŸ”´ High Severity Issues:
1. lodash <4.17.12 (Prototype Pollution)
   Fix: npm update lodash@^4.17.21

2. axios <0.21.2 (Server-Side Request Forgery)
   Fix: npm update axios@^1.4.0

ğŸ“Š License Compliance:
â”œâ”€â”€ MIT: 789 packages âœ…
â”œâ”€â”€ Apache-2.0: 34 packages âœ…
â”œâ”€â”€ BSD-3-Clause: 18 packages âœ…
â””â”€â”€ GPL-3.0: 2 packages âš ï¸
```

### Dependency Security

```bash
lord-commander analyze --security --deps-check
```

**Output:**

```
ğŸ” Dependency Security Check

Package Analysis:
â”œâ”€â”€ Outdated packages: 23
â”œâ”€â”€ Deprecated packages: 5
â”œâ”€â”€ Packages with known issues: 7

âš ï¸  Deprecated Packages:
â€¢ request@2.88.2 (Use axios or fetch)
â€¢ babel-core@6.26.3 (Upgrade to @babel/core)
â€¢ fsevents@1.2.13 (Update to latest)

ğŸ”„ Update Recommendations:
â€¢ Major updates available: 8 packages
â€¢ Minor updates available: 15 packages
â€¢ Patch updates available: 34 packages
```

## Code Quality Analysis

### Complexity Metrics

```bash
lord-commander analyze --quality --complexity
```

**Output:**

```
ğŸ“ Code Quality Metrics

Cyclomatic Complexity:
â”œâ”€â”€ Average: 4.2 âœ…
â”œâ”€â”€ Highest: 23 (UserProfile.tsx) âš ï¸
â”œâ”€â”€ Files > 10: 3 files âš ï¸

Technical Debt:
â”œâ”€â”€ Debt ratio: 12.4% âœ…
â”œâ”€â”€ Estimated time: 2.3 days
â”œâ”€â”€ High-priority issues: 7

ğŸ” Maintainability Index:
â”œâ”€â”€ Excellent (>85): 67 files
â”œâ”€â”€ Good (70-85): 23 files
â”œâ”€â”€ Fair (50-70): 8 files
â””â”€â”€ Poor (<50): 2 files âš ï¸
```

### Duplication Analysis

```bash
lord-commander analyze --quality --duplication
```

**Output:**

```
ğŸ“‹ Code Duplication Analysis

Duplication Summary:
â”œâ”€â”€ Total duplicated lines: 234 (2.1%)
â”œâ”€â”€ Duplicated blocks: 12
â”œâ”€â”€ Files with duplication: 8

ğŸ” Major Duplications:
1. UserForm validation logic (45 lines)
   Files: UserCreate.tsx, UserEdit.tsx

2. API error handling (23 lines)
   Files: api/users.ts, api/products.ts, api/orders.ts

ğŸ’¡ Refactoring Opportunities:
â€¢ Extract common validation logic
â€¢ Create reusable error handling utility
â€¢ Implement shared component patterns
```

## CI/CD Integration

### Exit Codes

Lord Commander uses standard exit codes for CI/CD integration:

| Exit Code | Meaning                           |
| --------- | --------------------------------- |
| `0`       | Analysis successful, no issues    |
| `1`       | Analysis failed (technical error) |
| `2`       | Thresholds exceeded               |
| `3`       | Security vulnerabilities found    |

### Threshold Configuration

```bash
# Set bundle size threshold
lord-commander analyze --threshold 500kb --fail-on-exceed

# Multiple thresholds
lord-commander analyze \
  --bundle-threshold 500kb \
  --security-threshold high \
  --performance-threshold 80
```

### GitHub Actions Integration

```yaml
name: Bundle Analysis

on:
  pull_request:
    branches: [main]

jobs:
  analyze:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: "18"

      - name: Install dependencies
        run: npm ci

      - name: Build project
        run: npm run build

      - name: Analyze bundle
        run: |
          lord-commander analyze \
            --ci \
            --json \
            --threshold 500kb \
            --report \
            --output ./reports/

      - name: Upload reports
        uses: actions/upload-artifact@v3
        with:
          name: analysis-reports
          path: ./reports/

      - name: Comment PR
        uses: actions/github-script@v6
        with:
          script: |
            const fs = require('fs');
            const analysis = JSON.parse(fs.readFileSync('./reports/analysis.json', 'utf8'));

            const comment = `
            ## Bundle Analysis Results

            **Total Size:** ${analysis.bundleSize}
            **Change:** ${analysis.sizeChange > 0 ? '+' : ''}${analysis.sizeChange}

            ${analysis.recommendations.map(rec => `â€¢ ${rec}`).join('\n')}
            `;

            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: comment
            });
```

## Report Generation

### HTML Reports

```bash
lord-commander analyze --report --output ./reports/
```

Generated HTML report includes:

- Interactive bundle visualization
- Dependency tree explorer
- Performance metrics dashboard
- Optimization recommendations

### JSON Output

```bash
lord-commander analyze --json --output analysis.json
```

**JSON Schema:**

```json
{
  "timestamp": "2023-12-07T10:30:00Z",
  "project": {
    "name": "my-app",
    "version": "1.0.0",
    "framework": "react"
  },
  "bundle": {
    "totalSize": 847200,
    "gzippedSize": 234100,
    "chunks": [
      {
        "name": "main",
        "size": 456300,
        "files": ["main.js", "main.css"]
      }
    ]
  },
  "dependencies": [
    {
      "name": "react-dom",
      "version": "18.2.0",
      "size": 130400,
      "treeshakable": true
    }
  ],
  "recommendations": [
    {
      "type": "bundle-size",
      "severity": "warning",
      "message": "Bundle size exceeds recommended threshold",
      "savings": 98900
    }
  ]
}
```

## Advanced Options

### Custom Analysis Rules

```bash
# Custom configuration file
lord-commander analyze --config ./analysis.config.json
```

**Configuration:**

```json
{
  "thresholds": {
    "bundleSize": "500kb",
    "gzippedSize": "150kb",
    "dependencies": 50,
    "complexity": 10
  },
  "rules": {
    "no-large-dependencies": {
      "enabled": true,
      "threshold": "100kb"
    },
    "no-duplicate-dependencies": {
      "enabled": true
    },
    "tree-shaking-required": {
      "enabled": true,
      "libraries": ["lodash", "moment"]
    }
  },
  "ignore": ["**/*.test.js", "**/node_modules/**", "dist/**"]
}
```

### Baseline Comparison

```bash
# Create baseline
lord-commander analyze --baseline --output baseline.json

# Compare against baseline
lord-commander analyze --compare baseline.json
```

**Comparison Output:**

```
ğŸ“Š Baseline Comparison

Bundle Size Changes:
â”œâ”€â”€ Main chunk: +23.4 KB (+5.4%) âš ï¸
â”œâ”€â”€ Vendor chunk: -12.1 KB (-3.9%) âœ…
â”œâ”€â”€ Total size: +11.3 KB (+1.3%) âš ï¸

New Dependencies:
â”œâ”€â”€ chart.js: +45.3 KB
â”œâ”€â”€ date-fns: +12.7 KB

Removed Dependencies:
â”œâ”€â”€ moment: -67.8 KB âœ…
```

## Troubleshooting

<AccordionGroup>
  <Accordion icon="exclamation-triangle" title="Build Required">
    **Error:** `No build output found`
    
    **Solution:** Build your project first:
    ```bash
    npm run build
    lord-commander analyze
    ```
  </Accordion>
  
  <Accordion icon="folder" title="Missing Source Maps">
    **Warning:** `Source maps not found, analysis may be incomplete`
    
    **Solution:** Enable source maps in your build configuration:
    ```javascript
    // vite.config.ts
    export default {
      build: {
        sourcemap: true
      }
    }
    ```
  </Accordion>
  
  <Accordion icon="clock" title="Performance Analysis Timeout">
    **Error:** `Lighthouse analysis timed out`
    
    **Solutions:**
    - Increase timeout: `--timeout 60`
    - Skip performance analysis: `--no-perf`
    - Use headless mode: `--headless`
  </Accordion>
</AccordionGroup>

## Related Commands

<CardGroup cols={2}>
  <Card title="init" icon="rocket" href="/commands/init">
    Initialize projects with analysis-ready configurations
  </Card>
  <Card title="scaffold" icon="wand-magic-sparkles" href="/commands/scaffold">
    Generate components with analysis in mind
  </Card>
</CardGroup>
