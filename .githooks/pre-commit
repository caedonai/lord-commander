#!/bin/sh
# Pre-commit hook for Lord Commander SDK

# Ensure non-interactive mode for CI environments
export CI=true
export NODE_ENV=test

echo "ğŸ” Running pre-commit checks..."

# Run linting on affected projects using NX
echo "ğŸ“ Running linting checks..."
pnpm nx run-many --target=lint --projects=api,ui,cli,cli-core,api-e2e,ui-e2e --parallel=3 || exit 1

# Run tests on projects that have test targets using NX  
echo "ğŸ§ª Running tests..."
pnpm test:all || exit 1

echo "âœ… Pre-commit checks passed!"